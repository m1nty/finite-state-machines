### Exercise

In the reference design from **experiment 5**, only the lower memory half (i.e., address range 000h-0FFh) is used for storing the LCD codes of lower-case characters. First, extend the “MIF” file with the LCD codes such that the upper memory half (i.e., address range 100h-1FFh) stores the LCD codes for upper-case characters. Using a single-bit flag (stored in a 1-bit register) you can keep track the mode, i.e., lower-case or upper-case: the left-shift key on the PS/2 keyboard sets the mode to upper-case and the right-shift key resets it to lower-case. For the sake of simplicity, it is assumed that the mode affects only the letter keys, i.e., ‘a’ to ‘z’. Note, when the left-shift key or the right-shift key are pressed, __nothing__ should be displayed on the character LCD (i.e., they are used only for setting the upper/lower-case modes). Note also, if the left-shift and right-shift keys are pressed more than once in between typing two alphabet character keys, then only the effect of the last shift key that was typed is considered.
 
For this exercise, as soon as the first key has been typed (other than left-shift or right-shift, as explained above), the character associated with this key should be displayed on the top line of the character LCD and thereafter immediately move to the bottom line. Assume the character in the top line is associated with letter keys only, i.e., 'a' to 'z'. As for the in-lab experiment, the entire bottom line will be displayed at once after sixteen keys have been typed. When the most recently filled bottom line is displayed, the rightmost (i.e, least significant) 7-segment display should show (in hex format) the number of times the character from the top line appears in the bottom line. As soon as a new key is typed again, the character on the top line will be updated and the rightmost 7-segment display will be lightened off until the new set of sixteen characters have been displayed on the bottom line. It should also be noted that the lower-case or upper-case modes matter __only__ when displaying a character, however they do not matter when the comparison is done between the top line character and any of the sixteen characters on the bottom line.

Consider the following example. If the character on the top line is 'b' and the bottom line is 'Hey Bubble Buddy' then the rightmost 7-segment display should show '4' after the bottom line is displayed; that is, both 'b' and 'B' from the bottom line should match the character on the top line. You should also note that while the a full line of 16 characters gets sent to the LCD controller, it will take just below 15 microseconds (us) in simulation. Hence, make sure the next key press in `board_events.txt` will be done after these 15 us have elapsed.

Submit your sources and in your report write approx half-a-page (but not more than full page) that describes your reasoning. Your sources should follow the directory structure from the in-lab experiments (already set-up for you in the `exercise` folder); note, your report (in `.pdf`, `.txt` or `.md` format) should be included in the `exercise/doc` sub-folder.

Your submission is due 14 hours before your next lab session. Late submissions will be penalized.

